<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html>
<body bgcolor="#ffffff">
<font size="-1">/&nbsp;ydom.h&nbsp;/&nbsp;Description</font>
<center>
	<h1>ydom.h</h1>
	<br />
	<table width="80%"><tr><td>
		<b>Abstract:</b> Include file for XML DOM parser.
		<hr width="100%" />
		<br />		<b>How to use the XML DOM API ?</b><p /> First of all, you must create an arkml object: <pre>ydom_t *dom = ydom_new();</pre> If you want to read the content of an existing XML file, you could use the <i>ydom_read_file()</i>, <i>ydom_read_stream()</i> or <i>ydom_read_memory()</i> functions.<br /> To write the XML tree into a stream (a file, or standard output), use the <i>ydom_write()</i> function.<br /> When you have finish with an XML object, use the <i>ydom_del()</i> function to free all allocated memory.<p /> <b>Simple example: use XML as a linked list</b><p /> <ul> <li><i>Create an XML object</i> <pre>ydom_t *dom = ydom_new();</pre></li> <li><i>Create a top-level element</i> <pre>ydom_node_t *data = ydom_add_elem(dom, "LIST-DATA");</pre> </li> <li><i>Add a list element</i> <pre>ydom_node_t *elem = ydom_node_add_elem(data, "LIST-ELEM");</pre></li> <li><i>Add an attribute to the element</i> <pre>ydom_node_add_attr(elem, "prop1", "value1");</pre></li> <li><i>Create another list element</i> <pre>elem = ydom_node_add_elem(data, "LIST-ELEM");</pre></li> <li><i>Add an attribute to it</i> <pre>ydom_node_add_attr(elem, "prop1", "value2");</pre></li> <li><i>Add a second attribute to it</i> <pre>ydom_node_add_attr(elem, "prop2", "value3");</pre></li> <li><i>Write the XML content to standard output</i> <pre>ydom_write(dom, stdout);</pre></li> <li><i>Delete the XML object</i> <pre>ydom_del(arkml);</pre></li> </ul> <i>You will have:</i><p /> &lt;?xml?&gt;<br /> &lt;LIST-DATA&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&lt;LIST-ELEM prop1="value1"/&gt;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&lt;LIST-ELEM prop1="value2" prop2="value3"/&gt;<br /> &lt;LIST-DATA&gt;<p /> <b>Get data with XPath expressions (see below for more)</b><p /> <ul> <li><i>To get all "LIST-ELEM" elements from the previously created list</i> <pre>yvect_t array = ydom_xpath(dom, "/LIST-DATA/LIST-ELEM");</pre> You will have a vector of XML nodes.<p /></li> <li><i>To get all "prop2" attributes of the "LIST-ELEM" elements</i> <pre>array = ydom_xpath(arkml, "/LIST-DATA/LIST-ELEM/@prop2");</pre> You will have the same type of vector. Remember that attributes are, in fact, the same kind of node than XML elements.<p /></li> <li><i>To get all "LIST-ELEM" elements that have a "SUB-ELEM" child element (no one in this example)</i> <pre>array = ydom_xpath(arkml, "/LIST-DATA/LIST-ELEM[SUB-ELEM]");</pre></li> <li><i>To get all "LIST-ELEM" elements that have a "prop2" attribute</i> <pre>array = ydom_xpath(arkml, "/LIST-DATA/LIST-ELEM[@prop2]");</pre></li> <li><i>To get all "LIST-ELEM" elements that have a "prop1" attribute with a "value1" value</i> <pre>array = ydom_xpath(arkml, "LIST-DATA/LIST-ELEM[@prop1='value1']");</pre></li> </ul> <p /> <b>What is XPath ?</b><p /> XPath is a solution to search nodes or attributes inside an XML tree. It is very similar to LDAP database search engines. <p /> <table> <tr><td>toto</td> <td>Return all "toto" tags, children of the current node.</td> </tr> <tr><td>/toto</td> <td>Return all "toto" tags at the top-level of the XML document of the current node.</td></tr> <tr><td>toto/titi</td> <td>Return all "titi" tags, children of any "toto" node child of the current node.</td></tr> <tr><td>../tata</td><td>Return all "toto" nodes, children of the father of the current node (so, all "toto" sibling nodes).</td></tr> <tr><td>./toto</td><td>Like the first example.</td></tr> <tr><td>*</td> <td>Return all the children tags of the current node.</td></tr> <tr><td>* /titi</td><td>return all "titi" tags which have the current node as grandfather.</td></tr> <tr><td>//foo</td><td>Return all "foo" descent tags (sons, grand-sons, grand-grand-sons, etc.).</td></tr> <tr><td>toto//foo</td><td>Return all "foo" nodes that descent of a "toto" tag, which is a child of the current node.</td></tr> <tr><td>ying | yang</td><td>Return all children of the current node named "ying" or "yang".</td></tr> <tr><td>@id</td><td>Return the "id" attribute of the current node.</td></tr> <tr><td>@*</td><td>Return all attributes of the current node.</td></tr> <tr><td>toto/@name</td><td>Return the "name" attribute of all "toto" nodes children of the current node.</td></tr> <tr><td>toto[titi]</td><td>Return all "toto" tags, children of the current node, which have a "titi" child node.</td></tr> <tr><td>toto[titi | tutu]</td><td>Return all "toto" tags, children of the current node, which have a "titi" or a "tutu" child node.</td></tr> <tr><td>toto[@name]</td><td>Return all "toto" tags, children of the current node, which have a "name" attribute.</td></tr> <tr><td>toto[@name="pouet"]</td><td>Return all "toto" tags, children of the current node, which have a "name" attribute with the "pouet" value.</td></tr> <tr><td>*[@id='3' | tutu]</td><td>Return all elements, child of the current tag, which have an "id" attribute with a value equal to "3" and/or a child tag named "tutu".</td></tr> <tr><td>toto[@name='titi'][@id='25']</td><td>Return all "toto" tags which have a "name" attribute with a value equal to "titi", and an "id" attribute equal to "25".</td></tr> </table><br /><br />
		<hr width="100%" />		<b>Version:</b> 1.0.0 Sep 14 2002
		<hr width="100%" />		<b>Authors:</b><br />
Amaury Bouchard <A HREF="mailto:amaury@amaury.net">amaury@amaury.net</A>
<BR>
	</td></tr></table>
</center>
</body>
</html>