<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html>
<body bgcolor="#ffffff">
<font size="-1">/&nbsp;ylog.h&nbsp;/&nbsp;Description</font>
<center>
	<h1>ylog.h</h1>
	<br />
	<table width="80%"><tr><td>
		<b>Abstract:</b> All definitions to use log files.
		<hr width="100%" />
		<br />		The ylogs are a usefull mean to write logs. <ul> <li>You initialize the logs. There is four initialization  types, to specify the logs destination: the standard error  output, the system logger (syslog), to a given file, or to a  callback function (to send the logs through network, for  example). Here are some examples: <ul> <li>YLOG_INIT_STDERR();</li> <li>YLOG_INIT_SYSLOG();</li> <li>YLOG_INIT_FILE("/var/mylog");</li> <li>YLOG_INIT_HANDLER(pointer_to_function);</li> </ul><br /> The init must be done in the main() function, which must have  its second parameter called "argv". The default output (without init) is set to the standard error output.<br /><br /> </li> <li>It is possible to set a default priority level. This is the minimal level needed for a log to be written in log file (or  written on stderr). There is five levels (in growing order): <ul> <li>DEBUG: debug information for source code that  should be debugged</li> <li>INFO: information, messages during debug time</li> <li>NOTE: notice, normal but significant</li> <li>WARN: warning, non-blocking problem</li> <li>ERR: error, doesn't work as it should</li> <li>CRIT: critical, the program can't continue</li> </ul> Some macros helps you to set the default priority level: <ul> <li>YLOG_SET_DEBUG();</li> <li>YLOG_SET_INFO();</li> <li>YLOG_SET_NOTE();</li> <li>YLOG_SET_WARN();</li> <li>YLOG_SET_ERR();</li> <li>YLOG_SET_CRIT();</li> </ul> A normal running program will be set to WARN or ERR, thus at  debug time you will set to INFO (or DEBUG if you want to trace all the program). The default level is set to WARN.<br /><br /> </li> <li>It is also possible, when the logs are written on stderr, to set the maximum log files size: <ul> <li>YLOG_SIZE_MINI();</li> <li>YLOG_SIZE_NORM();</li> <li>YLOG_SIZE_BIG();</li> <li>YLOG_SIZE_HUGE();</li> </ul> The size are 100 KO, 512 KO (default size), 2 MO and 10 MO.  When a file is full, it is moved with the date concatenate to  its name, and a new log file is created. <br /><br /> </li> <li>You can add a log entry with this command: <ul> <li>YLOG_ADD(YLOG_ERR, "problem %d", 5);</li> </ul> As you can see, this macro takes a priority level, a string  that describes the log entry itself, and as many additional  parameters as needed (like in printf()). If the log's priority level is lower than the current default one, the log entry  isn't added.<br /> There is another command, formerly created for temporary logs; for example, when you want to add some log entries for debug, you can put a simple: <ul> <li>YLOG("step 1");</li> <li>YLOG("step 2: '%s'", str);</li> </ul> The logs will be written with the minimal needed priority  level.<br /><br /> </li> <li>At the end of the program, you close the opened log with  the command: <ul> <li>YLOG_END();</li> </ul> If some logs are added after this command, they will be  redirected to the standard error output.<br /><br /> </li> <li><u>Additionnal feature: treatment by module</u><br /> You can have some parts of a program that should not, usually, write logs, but sometimes they should. The priority level is not enough all the time to separate the differents parts, so there is a module treatment system. <ul> <li>First of all, you create an environment variable named 'YLOG_MODULES', that contains a list of module names (separate with colons) which are allowed to write logs.</li> <li>In the modules that should sometimes write some logs, use this macro to do it: <pre>YLOG_MOD("module_name", YLOG_PRIO_ERR, "problem %d", i);</pre> If the module name is not found in the YLOG_MODULES variable, the log is not written. If it is found, or if YLOG_MODULES is not defined, it is like a normal call to YLOG_ADD() (ie: the priority level is checked). </li> </ul> </li> </ul><br /><br />
		<hr width="100%" />		<b>Version:</b> 1.0.0 Jun 26 2002
		<hr width="100%" />		<b>Authors:</b><br />
Amaury Bouchard <A HREF="mailto:amaury@amaury.net">amaury@amaury.net</A>
<BR>
	</td></tr></table>
</center>
</body>
</html>