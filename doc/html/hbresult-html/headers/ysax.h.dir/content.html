<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html>
<body bgcolor="#ffffff">
<font size="-1">/&nbsp;ysax.h&nbsp;/&nbsp;Content</font>
<pre>/* Process this file with the HeaderBrowser tool (http://www.headerbrowser.org)
   to create documentation. */

#ifndef __YSAX_H__
#define __YSAX_H__

#if defined(__cplusplus) || defined(c_plusplus)
extern "C" {
#endif /* __cplusplus || c_plusplus */

#include <stdio.h>
#include <stdbool.h>
#include "ydefs.h"
#include "ystr.h"
#include "yvect.h"
#include "yerror.h"


#define YSAX_DATA(x)	(((ysax_t*)x)->parse_data)

/* XML strings definitions */
#define	XML			"xml"
#define	XML_VERSION		"version"
#define	ENCODING		"encoding"
#define	STANDALONE		"standalone"
#define	CDATA			"CDATA"
#define	XMLNS			"xmlns"


struct ysax_attr_s {
	char *name;
	char *value;
};


typedef struct ysax_attr_s ysax_attr_t;


struct ysax_s {
	FILE *file;
	bool must_close_stream;
	char *mem;
	char (*getc_hdlr)(void*);
	void (*ungetc_hdlr)(char, void*);
	void *xml_data;
	void *parse_data;
	void (*open_tag_hdlr)(struct ysax_s*, char*, yvect_t);
	void (*inside_text_hdlr)(struct ysax_s*, char*);
	void (*close_tag_hdlr)(struct ysax_s*, char*);
	void (*comment_hdlr)(struct ysax_s*, char*);
	void (*process_instr_hdlr)(struct ysax_s*, char*, char*);
	void (*cdata_hdlr)(struct ysax_s*, char*);
	yerr_t error;
	int line_nbr;
};


typedef struct ysax_s ysax_t;


ysax_t *ysax_new(void *parse_data);


yerr_t ysax_read_handler(ysax_t *sax, char (*getc_hdlr)(void*),
			 void (*ungetc_hdlr)(char,void*), void *xml_data);


yerr_t ysax_read_file(ysax_t *sax, const char *filename);


yerr_t ysax_read_stream(ysax_t *sax, FILE *stream);


yerr_t ysax_read_memory(ysax_t *sax, char *mem);


void ysax_free(ysax_t *sax);


void ysax_set_tag_hdlr(ysax_t *sax,
		       void (*open_hdlr)(ysax_t*, char*, yvect_t),
		       void (*close_hdlr)(ysax_t*, char*));


void ysax_set_inside_text_hdlr(ysax_t *sax,
			       void (*hdlr)(ysax_t*, char*));


void ysax_set_comment_hdlr(ysax_t *sax,
			   void (*hdlr)(ysax_t*, char*));


void ysax_set_process_instr_hdlr(ysax_t *sax,
				 void (*hdlr)(ysax_t*, char*, char*));


void ysax_set_cdata_hdlr(ysax_t *sax,
			 void (*hdlr)(ysax_t*, char*));


void ysax_stop(ysax_t *sax);


void ysax_free_attr(void *e, void *data);

#if defined(__cplusplus) || defined(c_plusplus)
}
#endif /* __cplusplus || c_plusplus */

#endif /* __YSAX_H__ */
</pre>
</body>
</html>